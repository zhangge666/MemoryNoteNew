## 一、核心功能模块

1. **文档管理（DocumentManager）**
    
    - 统一维护文档的内存模型（unsaved buffer）。
        
    - 支持多标签打开，每个标签绑定一个文档模型。
        
    - 提供保存、关闭、恢复、撤销/重做接口。
        
2. **多分区标签系统（Tab & Panel System）**
    
    - 标签统一抽象为 **EditorInput**（参考 VS Code 设计）。所有的页面都要注册到标签，包括/pages下的设置，首页，复习等页面
        
    - 支持多种类型的标签：
        
        - Markdown 文本编辑器
            
        - 设置页（Webview 类型）
            
        - 复习系统面板
            
    - 标签可拖拽、分屏（左、右、上下分区）。
        
    - 统一生命周期：打开 → 激活 → 修改 → 保存 → 关闭。
        
3. **内存文本模型（避免数据丢失）**
    
    - 每个标签的编辑内容存储在 **内存缓冲区模型**，与文件解耦。
        
    - 切换标签时不会丢失数据，未保存的状态保存在 `dirty` 标记中。
        
    - 提供自动保存/定时保存功能。
        
    - 支持应用重启时恢复未保存内容（session restore）。
        
4. **插件系统**
    
    - 参考 Obsidian：提供统一的插件 API。
        
    - 插件类型：
        
        - **编辑器插件**：操作 Markdown 文本（如加粗、插入标签）。
            
        - **渲染插件**：修改 Markdown 渲染输出（新增语法、改变展示效果）。
            
        - **软件主题UI修改插件**：修改软件的UI主题
            
        - **实用工具插件**：如备份管理的插件
    - 插件运行环境：
        
        - 沙盒化，防止影响主线程。
            
        - 支持生命周期（onLoad, onUnload等）。
        细节：1. 插件可以通过过暴露的接口实现在侧边栏增加独立功能按钮（插件需要的话必须通过一个注册接口去注册能能挂载到侧边栏，并且可以在设置中统一管理是否在侧边栏展示（单个插件管理是否可以在侧边栏展示））。
        2. 每个插件都必须实现自己插件对应的设置页面，并且在软件的设置-插件设置-设置中展示页面信息
        3. 每个插件如果要实现自己内容的持久化存储则需要将数据读写在自己插件目录下的data.json文件中进行
1. **Markdown 渲染管道**
    
    - 基于 markdown-it，支持扩展语法。
        
    - 提供 `MarkdownPostProcessor`，允许插件修改渲染后的 DOM。
        
    - 支持 Live Preview（所见即所得）：
        
        - 使用 CodeMirror/Monaco 的 Decoration API，在源文本上覆盖渲染效果。